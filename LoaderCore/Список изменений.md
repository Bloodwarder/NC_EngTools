# 17.01.2025

## Модуль LayerWorks  

- Добавлена команда **АВТОЗОНЫ** - автоматически отбивает зоны на основе значений параметров из базы данных
- Добавлен редактор стандартов (находится по пути */ExtensionLibraries/LayerWorks/LayersDatabaseEditor.exe*)

	Cтандарты для зон также задаются в редакторе

- в тестовом режиме в базу данных добавлен классификатор ЗОУИТ
- Добавлена команда **СВСШТРИХ** - штрихует замкнутые полилинии согласно стандартам из базы данных
- Добавлено форматирование штриховок командой **СВС**

# 29.11.2024

## Модуль Utilities
- Добавлена команда **ПЛПОДЛОЖКА** - чертит полилинию-подложку по выбранной полилинии и точкам начала и окончания (для футляров)

# 15.11.2024  

## Большое обновление!  

## Общее:
- Все модули обновлены до .NET 6.0. Для запуска необходим nanoCAD версии не менее 23.0.
- Взаимодействие модулей между собой. Например, при включенном модуле LayerWorks модуль GeoMod обрабатывает форматирование результатов команд на основе имён слоёв.
- Добавлена конфигурация. Теперь настраиваемые параметры можно установить в файле *Configuration.xml*.
- Многие ранее статичные параметры вынесены в конфигурацию (например - размеры сеток условных обозначений, высота текста подписей, имена обрабатываемых блоков для ВП)
## Модуль LayerWorks:
- НОВАЯ КОМАНДА:	**НОВСТАНДСЛОЙ** - добавляет стандартный слой, предлагая последовательно выбрать классификаторы в окне nanoCAD
- НОВАЯ КОМАНДА:	**СЛОЙОТЧЕТ** - выгружает в Excel сводную таблицу протяжённостей по слоям с указанным префиксом
- Добавлена поддержка базы данных SQLite для хранения свойств слоёв.
- Логика обработки слоёв вынесена в XML файл. Теперь можно создать свой парсер для раздела со своим префиксом. Настраивается порядок классификаторов, описания, корректные сочетания классификаторов, трансформации слоёв в случае некорректных сочетаний.
- Логика визуализации команды **ВИЗРАЗДЕЛ** также вынесена в XML файл *LayerParser_[ПРЕФИКС].xml*
- Фильтры слоёв для команды **АВТОСБОРКА** также вынесены в XML файл *LayerParser_[ПРЕФИКС].xml*
- КАЛЬКА при отсутствии слоя в чертеже также добавляет поверх внешних ссылок объект кальки размером текущего окна чертежа
- Исправлен сброс команды **ВИЗРАЗДЕЛ** при автосохранении. Теперь сбрасывает только при обычном сохранении. При "Сохранить как" сохраняет подсвеченное состояние.
- Исправлены некоторые ошибки с транзакциями для команды АВТОСБОРКА
- Исправлен баг с необходимостью переназначать образцы штриховки вручную после команды АВТОСБОРКА
## Модуль Utilities:
- НОВАЯ КОМАНДА:	**ПЛЭКСЕЛЬ** - строит полилинию по координатам из таблицы Excel в буфере обмена
- НОВАЯ КОМАНДА:	**НУЛЕВАЯШИРИНАТЕКСТА** - устанавливает для многострочного текста нулевую ширину (как было в автокаде)
- Команда **ОБЪЕКТСОЕД** теперь также работает с полилиниями (ставит точку в ближайшей вершине)
- Команда **МЛИНВПЛИН** теперь форматирует линии при включенном модуле LayerWorks (если у исходной мультилинии подходящий слой)
## Модуль GeoMod
- НОВАЯ КОМАНДА:	**ОКРУГЛКООРД** - округляет координаты объекта (по умолчанию - до 2 знаков за запятой, устанавливается в конфигурации)
- Исправлены ошибки команды **ВКТИМПОРТ** при фильтрации текста объектов QGIS из буфера обмена
- Исправлена обработка крайних точек замкнутых полилиний (теперь одинаковые точки не дублируются)
## Сервисные команды
- НОВАЯ КОМАНДА:	**ЛОГКОМАНДЫ** - следующая команда создаёт лог-файл в папке открытого чертежа


# 23.11.2023
## Функции  
### Модуль Utilities
- Добавлена команда **ОБЪЕКТСОЕД**. Назначение - построение полилинии по объектам чертежа. Последовательно выбирайте объекты, и команда построит полилинию по их центрам/точкам вставки. На данный момент принимает вхождения блоков (точки вставки) и окружности(центры).
- Добавлена команда **МЛИНВПЛИН**. Преобразует мультилинию в полилинию.
## Исправления
- В окне автозапуска добавлены кнопки для списка обновлений и известных проблем.

# 08.11.2023
## Функции
### Модуль GeoMod
- Добавлено окно параметров буферной зоны

# 12.09.2023
## Функции
- добавлен модуль GeoMod (работает только для 23 нанокада). Функционал - отбитие зон и переброска геометрии из QGIS через WKT текст в буфере обмена.
## Исправления
- список изменений теперь корректно обновляется до отображения окна автозапуска

# 14.09.2023
## Исправления
- Исправлены команды для вертикальной планировки (устранена поломка, когда после одной ошибки все команды переставали работать)
- Исправлена ошибка автосборки при повторном использовании или при смене чертежа

# 14.08.2023
## Исправления
- Исправлен вылет при сохранении чертежа при включенной команде **ВИЗРАЗДЕЛ**

# 17.07.2023
## Функции
- **АВТОСБОРКА** теперь может создавать условные для объектов внутри замкнутой полилинии
- в тестовом режиме добавлена команда **СМТ**
- В окно запуска добавлен вывод текста с данными о последнем обновлении

# 13.07.2023
## Исправления
- при автосборке названия подзаголовков разделов подписываются курсивом, заголовок - жирным
- перечисления с подзаголовками теперь оканчиваются на ;
- если ширина текста маркированной линии составляет более 65% ширины ячейки, текст в условных обозначениях сжимается

# 11.07.2023
## Исправления
- исправлена валидация по имени блока в командах для вертикальной планировки
- **ВИЗРАЗДЕЛ** теперь вместо списка необработанных слоёв показывает их число

# 05.07.2023
## Функции
- добавлены команды **ТОРИЕНТ** и **ПЛТОРИЕНТ**
- добавлены команды для вертикальной планировки
## Исправления
- доработано окно автозапуска

# 03.07.2023
## Функции:
- Переработана структура программы. Добавлено окно автозапуска и автоматическое обновление
## Исправления:
- Исправлено некорректное назначение глобальной ширины линий при автосборке условных обозначений
- В тестовом режиме добавлены команды для вертикальной планировки

# 21.06.2023
## Функции:
- Добавлена команда **АВТОСБОРКА**
- Теперь команда **ВНЕШПРОЕКТ** при применении на объект/слой *_дем* преобразует его в *_ндем*, а не в *_неутв*
## Исправления:
- Исправлена команда **ПОДПИСЬ**. Теперь поддерживает последнее значение и автозамену символом диаметра для текста вида *"2д100"*

# до 21.06.2023
## Изменения:  
- Добавлена поддержка последнего значения для команды **ВНЕШПРОЕКТ**
- Добавлены сообщения об ошибках при обработке слоёв из списка
- Обновлены стандартные значения слоёв, добавлены новые слои для третьей версии условных обозначений
- Добавлены значения по умолчанию для нестандартных слоёв
- Исправлена ошибка смещения нумерации списка для команды **ВИЗРАЗДЕЛ**
- Добавлена возможность работы в нескольких чертежах для команды **ВИЗРАЗДЕЛ**
- Добавлена команда **ПОДПИСЬ**
- Исправлена отрисовка кругов

